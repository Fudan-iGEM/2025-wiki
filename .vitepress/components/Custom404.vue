<template>
  <div class="error-container">
    <!-- 404 SVG 图片 -->
    <div class="svg-wrapper" ref="svgContainer">
      <div ref="svg404" class="svg-container">
        <!-- 直接嵌入SVG -->
        <svg xmlns="http://www.w3.org/2000/svg" id="_图层_1" data-name="图层 1" viewBox="0 0 1205.78 789" class="svg-404">
          <g id="_应用例" data-name="应用例">
            <g id="_袖子" data-name="袖子">
              <path d="M959 358c0 52.39-11.25 102.15-31.47 147H274.47C254.25 460.15 243 410.39 243 358 243 160.28 403.28 0 601 0s358 160.28 358 358Z" style="fill:#f6fbe2"/>
              <path d="M531.54 337.92h245v36.29c0 21.36-17.34 38.71-38.71 38.71H570.25c-21.36 0-38.71-17.34-38.71-38.71v-36.29ZM905.54 294.92a9 9 0 0 1 9 9v70.29c0 1.94-.14 3.84-.42 5.71a38.547 38.547 0 0 1-10.92 21.66c-7 7.01-16.68 11.34-27.37 11.34h-42.58c-21.38 0-38.71-17.33-38.71-38.71 0-10.02 4.06-19.09 10.63-25.66s15.64-10.63 25.66-10.63h47.42c6.67 0 12.92 1.8 18.29 4.94v-38.94a9 9 0 0 1 9-9Z" class="cls-5"/>
              <path d="M914.54 374.21v5.71h-.42c.28-1.87.42-3.77.42-5.71Z" class="cls-5"/>
              <!-- 橙色圆点 (尾巴装饰) -->
              <circle cx="903.54" cy="244.92" r="43" class="cls-14 tail-dot"/>
              <!-- 脚部圆形 -->
              <path d="M563.54 458.92c0 19.33-15.67 35-35 35-2.6 0-5.13-.28-7.57-.83-15.69-3.45-27.43-17.44-27.43-34.17 0-17.63 13.04-32.22 30-34.65 1.63-.23 3.3-.35 5-.35 19.33 0 35 15.67 35 35Z" class="cls-9 foot"/>
              <path d="M478.54 458.92c0 16.73-11.74 30.72-27.43 34.17-2.44.55-4.97.83-7.57.83-19.33 0-35-15.67-35-35s15.67-35 35-35c1.7 0 3.37.12 5 .35 16.96 2.43 30 17.02 30 34.65Z" class="cls-5 foot"/>
              <!-- 黄色装饰点 -->
              <path d="M772.22 246c0 .5-.25.93-.64 1.18-.4.05-.76.1-1.1.19-.44.11-.8.28-1.06.51-.1.09-.2.18-.3.28-1.8 1.75-2.26 4.4-1.33 6.74s1.43 4.87 1.43 7.53c0 11.32-9.18 20.5-20.5 20.5-.08 0-.16 0-.24-.01-9.28-.1-17.07-6.37-19.48-14.9-.83-5.63.47-11.48 1.77-14.94 1.07-2.86 4.04-6.12 8.18-8.67 6.79-4.19 16.73-6.51 26.68-2.14 2.23.98 3.97 1.74 5.34 2.35.27.12.52.23.77.35.29.24.48.62.48 1.04Z" style="fill:#d9e021" class="yellow-dot"/>
              <path d="M752.22 293.92s-10-4-6.74-19" style="fill:#472d2c;stroke:#42210b;stroke-linecap:round;stroke-miterlimit:10;stroke-width:8px"/>
              <rect width="18" height="75.6" x="730.22" y="270.62" rx="9" ry="9" style="fill:#472d2c" transform="rotate(49.41 739.241 308.447)"/>
              <!-- 葡萄装饰 (不添加动画) -->
              <circle cx="694" cy="299" r="43" style="fill:#7b58b2" class="grape"/>
              <circle cx="585.54" cy="356.92" r="43" style="fill:#434389" class="grape"/>
              <circle cx="628" cy="299" r="43" style="fill:#614498" class="grape"/>
              <circle cx="657" cy="245" r="43" class="cls-6 grape"/>
              <circle cx="722.54" cy="356.92" r="43" class="cls-6 grape"/>
              <circle cx="656.54" cy="356.92" r="43" style="fill:#4a2b7b" class="cls 6grape"/>
              <path d="M443.54 337.92h-45v-28.5c0-20.71 16.79-37.5 37.5-37.5 8.44 0 16.23 2.79 22.5 7.5-9.11 6.84-15 17.73-15 30v28.5Z" style="fill:#0e9f99"/>
              <path d="M518.54 309.42v66c0 10.36-4.2 19.73-10.98 26.52-6.79 6.78-16.16 10.98-26.52 10.98h-170c-20.71 0-37.5-16.79-37.5-37.5 0-10.36 4.2-19.73 10.98-26.52 6.79-6.78 16.16-10.98 26.52-10.98h132.5v-28.5c0-12.27 5.89-23.16 15-30 6.27-4.71 14.06-7.5 22.5-7.5 10.36 0 19.73 4.2 26.52 10.98 6.78 6.79 10.98 16.16 10.98 26.52Z" class="cls-5"/>
              <!-- 三角形装饰 -->
              <path d="m269.64 379.71-45.27 26.14v-52.28l45.27 26.14z" class="cls-14 triangle"/>
              <!-- 眼睛中心 -->
              <circle cx="429.54" cy="371.92" r="31" style="fill:#e6f2fe" class="eye-center"/>
              <circle cx="429.54" cy="371.92" r="26" class="cls-9 eye-pupil"/>
              <!-- 右侧脚部 -->
              <path d="M902.44 458.87c0 19.33-15.67 35-35 35-2.6 0-5.13-.28-7.57-.83-15.69-3.45-27.43-17.44-27.43-34.17 0-17.63 13.04-32.22 30-34.65 1.63-.23 3.3-.35 5-.35 19.33 0 35 15.67 35 35Z" class="cls-9 foot"/>
              <path d="M817.44 458.87c0 16.73-11.74 30.72-27.43 34.17-2.44.55-4.97.83-7.57.83-19.33 0-35-15.67-35-35s15.67-35 35-35c1.7 0 3.37.12 5 .35 16.96 2.43 30 17.02 30 34.65Z" class="cls-5 foot"/>
            </g>
          </g>
        </svg>
      </div>
    </div>
    
    <!-- 错误信息 -->
    <h1 class="error-title">404</h1>
    <div class="error-message">
      Oops! The page you're looking for doesn't exist.
    </div>
    
    <!-- 返回按钮 -->
Please check <a href="https://video.igem.org/w/nri1zca7eHRFtGVEZWxfqe" target=_blank>our promotion video</a>.<br>
<a href="/" class="back-button">Team Fudan</a>

  </div>
</template>

<script setup>
import { ref, onMounted, onUnmounted } from 'vue'
import { gsap } from 'gsap'

const svgContainer = ref(null)
const svg404 = ref(null)
let animationTimeline = null

onMounted(() => {
  initAnimations()
})

const initAnimations = () => {
  if (!svg404.value) return
  
  animationTimeline = gsap.timeline({ repeat: -1 })
  
  const feet = svg404.value.querySelectorAll('.foot')
  feet.forEach((foot, index) => {
    animationTimeline.to(foot, {
      duration: 0.8,
      y: -15,
      ease: "bounce.out",
      repeat: -1,
      yoyo: true,
      delay: index * 0.2,
      transformOrigin: "center bottom"
    }, 0)
  })
  
  const tailDot = svg404.value.querySelector('.tail-dot')
  if (tailDot) {
    animationTimeline.to(tailDot, {
      duration: 2,
      rotation: 360,
      ease: "none",
      repeat: -1,
      transformOrigin: "center center"
    }, 0)
    
    animationTimeline.to(tailDot, {
      duration: 1.5,
      scale: 1.3,
      ease: "power2.inOut",
      repeat: -1,
      yoyo: true,
      transformOrigin: "center center"
    }, 0)
  }
  
  // 3. 黄色装饰点摆动
  const yellowDot = svg404.value.querySelector('.yellow-dot')
  if (yellowDot) {
    animationTimeline.to(yellowDot, {
      duration: 1.2,
      rotation: 15,
      ease: "power2.inOut",
      repeat: -1,
      yoyo: true,
      transformOrigin: "center center"
    }, 0)
    
    animationTimeline.to(yellowDot, {
      duration: 2,
      scale: 1.1,
      ease: "sine.inOut",
      repeat: -1,
      yoyo: true
    }, 0)
  }
  
  // 4. 眼睛眨眼效果
  const eyes = svg404.value.querySelectorAll('.eye')
  eyes.forEach((eye, index) => {
    animationTimeline.to(eye, {
      duration: 0.1,
      scaleY: 0.1,
      ease: "power2.inOut",
      repeat: -1,
      repeatDelay: 3,
      delay: index * 0.1,
      transformOrigin: "center center"
    }, 0)
  })
  
  // 5. 眼睛瞳孔跟随效果
  const eyePupil = svg404.value.querySelector('.eye-pupil')
  if (eyePupil) {
    animationTimeline.to(eyePupil, {
      duration: 2,
      x: 5,
      ease: "power2.inOut",
      repeat: -1,
      yoyo: true
    }, 0)
  }
  
  // 7. 三角形装饰旋转
  const triangle = svg404.value.querySelector('.triangle')
  if (triangle) {
    animationTimeline.to(triangle, {
      duration: 3,
      rotation: 360,
      ease: "none",
      repeat: -1,
      transformOrigin: "center center"
    }, 0)
  }
  

  // 9. 眼睛中心高光闪烁
  const eyeCenter = svg404.value.querySelector('.eye-center')
  if (eyeCenter) {
    animationTimeline.to(eyeCenter, {
      duration: 0.5,
      opacity: 0.3,
      ease: "power2.inOut",
      repeat: -1,
      yoyo: true,
      repeatDelay: 2
    }, 0)
  }
}

onUnmounted(() => {
  if (animationTimeline) {
    animationTimeline.kill()
  }
})
</script>

<style scoped>
/* 主容器样式 */
.error-container {
  min-height: 100vh;
  background-color: #f9fafb;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 1rem;
}

/* SVG容器样式 */
.svg-wrapper {
  margin-bottom: 2rem;
}

.svg-container {
  width: 20rem;
  height: 20rem;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* 响应式设计 */
@media (min-width: 768px) {
  .svg-container {
    width: 24rem;
    height: 24rem;
  }
}

.svg-404 {
  width: 100%;
  height: 100%;
}

/* 错误标题样式 */
.error-title {
  font-size: 3.75rem;
  font-weight: 700;
  color: #3b82f6;
  margin-bottom: 1rem;
  margin: 0;
}

@media (min-width: 768px) {
  .error-title {
    font-size: 6rem;
  }
}

/* 错误消息样式 */
.error-message {
  font-size: 1.25rem;
  color: #374151;
  margin-bottom: 2rem;
  text-align: center;
}

@media (min-width: 768px) {
  .error-message {
    font-size: 1.5rem;
  }
}

/* 返回按钮样式 */
.back-button {
  padding: 1rem 2rem;
  background-color: #2563eb;
  color: white;
  border-radius: 0.5rem;
  text-decoration: none;
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
  font-size: 1.125rem;
  font-weight: 500;
  transition: background-color 0.3s ease;
}

.back-button:hover {
  background-color: #1d4ed8;
}

/* SVG样式类 */
.cls-5 {
  fill: #5dcac6;
}

.cls-6 {
  fill: #40428f;
}

.cls-9 {
  fill: #008794;
}

.cls-14 {
  fill: #e97e35;
}

/* 确保SVG动画流畅 */
svg {
  overflow: visible;
}

/* 为动画元素添加平滑过渡 */
.foot, .tail-dot, .yellow-dot, .eye, .triangle, .eye-center, .eye-pupil {
  transform-origin: center center;
}

/* 葡萄元素保持静止 */
.grape {
  transform-origin: center center;
}
</style>
